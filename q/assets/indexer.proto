syntax = "proto3";

package narwhal;
option go_package = "./rpc";

service Indexer {
	rpc SendIndexReq(stream QueryMsg) returns (stream QueryMsg) {}
	rpc Send(QueryMsg) returns (QueryMsg) {}
}

message IndexerReq {
	string id = 1;
}	

message IndexerResp {
	string id = 1;
	string addr = 2;
}	

message QueryMsg {
	enum MsgType {
		FIRST = 0;
		RELAY = 1;
		FINISH = 2;
		ERROR = 3;
	}
	MsgType type = 1;
	string prefix = 2;
	string addr = 3;
}